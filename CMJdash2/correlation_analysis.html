<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metric Correlation Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5.0.0/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-base-100">
    <div class="container mx-auto p-4 max-w-6xl">
        
        <!-- Header -->
        <div class="bg-base-200 rounded-lg p-4 mb-4">
            <h1 class="text-3xl font-bold">Metric Correlation Analysis</h1>
            <p class="text-base-content/70 mt-1">Understanding relationships between CMJ performance metrics</p>
        </div>

        <!-- Correlation Matrix -->
        <div class="bg-base-200 rounded-lg p-4 mb-4">
            <h2 class="text-xl font-bold mb-3">Pearson Correlation Matrix</h2>
            <div class="overflow-x-auto mb-3">
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th class="bg-base-300">Metric</th>
                            <th class="bg-base-300 text-center">Jump Height</th>
                            <th class="bg-base-300 text-center">Peak Power</th>
                            <th class="bg-base-300 text-center">Peak Force</th>
                            <th class="bg-base-300 text-center">RSI-mod</th>
                            <th class="bg-base-300 text-center">RFD</th>
                            <th class="bg-base-300 text-center">Asymmetry</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-semibold bg-base-300">Jump Height</td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">1.00</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.89</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.68</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.52</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.61</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.12</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-semibold bg-base-300">Peak Power</td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.89</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">1.00</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.84</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.48</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.72</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.18</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-semibold bg-base-300">Peak Force</td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.68</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.84</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">1.00</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">0.31</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.91</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.15</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-semibold bg-base-300">RSI-modified</td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.52</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.48</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">0.31</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">1.00</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">0.38</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.28</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-semibold bg-base-300">RFD</td>
                            <td class="text-center">
                                <span class="badge badge-info badge-sm">0.61</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.72</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-success badge-sm">0.91</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">0.38</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">1.00</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.22</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-semibold bg-base-300">Asymmetry</td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.12</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.18</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.15</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.28</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">-0.22</span>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-ghost badge-sm">1.00</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Legend -->
            <div class="flex flex-wrap gap-3 justify-center">
                <div class="flex items-center gap-2">
                    <span class="badge badge-success badge-sm">0.70+</span>
                    <span class="text-sm">Strong Correlation</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="badge badge-info badge-sm">0.50-0.70</span>
                    <span class="text-sm">Moderate Correlation</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="badge badge-ghost badge-sm">&lt;0.50</span>
                    <span class="text-sm">Weak Correlation</span>
                </div>
            </div>
        </div>

        <!-- Key Insights -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
            <!-- Strongest Correlations -->
            <div class="bg-success/20 border border-success rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-success" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                    </svg>
                    <h3 class="font-bold text-success">Strongest Correlations (Redundant Metrics)</h3>
                </div>
                <ul class="text-sm space-y-1">
                    <li>• <strong>Peak Force ↔ RFD (r=0.91):</strong> Highly redundant - monitor one as primary</li>
                    <li>• <strong>Jump Height ↔ Peak Power (r=0.89):</strong> Strong relationship - both reflect explosive capacity</li>
                    <li>• <strong>Peak Power ↔ Peak Force (r=0.84):</strong> Expected coupling of force and power production</li>
                </ul>
            </div>

            <!-- Independent Metrics -->
            <div class="bg-info/20 border border-info rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                    </svg>
                    <h3 class="font-bold text-info">Independent Metrics (Unique Qualities)</h3>
                </div>
                <ul class="text-sm space-y-1">
                    <li>• <strong>RSI-modified:</strong> Captures reactive strength independently (r=0.31-0.52 with others)</li>
                    <li>• <strong>Asymmetry Index:</strong> Orthogonal to performance metrics (r=-0.12 to -0.28)</li>
                    <li>• These metrics assess distinct neuromuscular qualities and should be monitored separately</li>
                </ul>
            </div>
        </div>

        <!-- Core Monitoring Battery Recommendation -->
        <div class="bg-base-200 rounded-lg p-4 mb-4">
            <h2 class="text-xl font-bold mb-3">Recommended Core Monitoring Battery</h2>
            <div class="alert alert-info mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <div class="text-sm">
                    <strong>Recommendation:</strong> Based on correlation analysis, the following 4-metric battery provides comprehensive assessment while minimizing redundancy:
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
                <div class="bg-base-300 rounded-lg p-3">
                    <div class="font-bold mb-1">1. Jump Height</div>
                    <div class="text-sm text-base-content/70">Primary explosive power indicator</div>
                </div>
                <div class="bg-base-300 rounded-lg p-3">
                    <div class="font-bold mb-1">2. Peak Power</div>
                    <div class="text-sm text-base-content/70">Rate of force development proxy</div>
                </div>
                <div class="bg-base-300 rounded-lg p-3">
                    <div class="font-bold mb-1">3. RSI-modified</div>
                    <div class="text-sm text-base-content/70">Independent reactive strength measure</div>
                </div>
                <div class="bg-base-300 rounded-lg p-3">
                    <div class="font-bold mb-1">4. Asymmetry Index</div>
                    <div class="text-sm text-base-content/70">Injury risk and bilateral function</div>
                </div>
            </div>

            <div class="mt-3 text-sm text-base-content/70">
                <strong>Optional Add-ons:</strong> Peak Force or RFD can be added if detailed force characteristics are needed, though they provide similar information.
            </div>
        </div>

        <!-- View Scatter Plots Button -->
        <div class="text-center mb-4">
            <button class="btn btn-primary" id="view-scatter-plots">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                </svg>
                View Scatter Plot Visualizations
            </button>
        </div>

        <!-- Scatter Plots Section (Initially Hidden) -->
        <div id="scatter-plots-section" class="hidden">
            <div class="bg-base-200 rounded-lg p-4 mb-4">
                <h2 class="text-xl font-bold mb-3">Scatter Plot Visualizations</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <!-- Scatter 1: Jump Height vs Peak Power -->
                    <div class="bg-base-300 rounded-lg p-3">
                        <h3 class="font-bold mb-2">Jump Height vs Peak Power (r=0.89)</h3>
                        <canvas id="scatter-1"></canvas>
                    </div>

                    <!-- Scatter 2: Peak Force vs RFD -->
                    <div class="bg-base-300 rounded-lg p-3">
                        <h3 class="font-bold mb-2">Peak Force vs RFD (r=0.91)</h3>
                        <canvas id="scatter-2"></canvas>
                    </div>

                    <!-- Scatter 3: RSI vs Peak Force -->
                    <div class="bg-base-300 rounded-lg p-3">
                        <h3 class="font-bold mb-2">RSI-modified vs Peak Force (r=0.31)</h3>
                        <canvas id="scatter-3"></canvas>
                    </div>

                    <!-- Scatter 4: Flight Time vs Jump Height -->
                    <div class="bg-base-300 rounded-lg p-3">
                        <h3 class="font-bold mb-2">Flight Time vs Jump Height (r=0.98)</h3>
                        <canvas id="scatter-4"></canvas>
                    </div>
                </div>

                <div class="alert alert-info mt-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="text-sm">
                        <strong>Interpretation:</strong> Strong linear relationships (plots 1, 2, 4) indicate redundancy between metrics. Weak relationship (plot 3) demonstrates that RSI-modified captures unique reactive strength qualities independent of maximal force production.
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-wrap gap-2 justify-center">
            <button class="btn btn-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                Export Analysis Report
            </button>
            <button class="btn btn-ghost">Return to Dashboard</button>
        </div>

    </div>

    <script>
        // Chart.js Configuration
        Chart.defaults.color = '#a6adbb';
        Chart.defaults.borderColor = 'rgba(166, 173, 187, 0.1)';

        // Sample scatter plot data (12 WR athletes)
        const scatterData1 = [
            {x: 51.2, y: 5180},
            {x: 49.8, y: 5020},
            {x: 48.9, y: 4920},
            {x: 48.2, y: 4850},
            {x: 47.5, y: 4680},
            {x: 46.8, y: 4620},
            {x: 45.9, y: 4580},
            {x: 45.2, y: 4380},
            {x: 44.5, y: 4290},
            {x: 43.8, y: 4180},
            {x: 42.9, y: 4050},
            {x: 42.1, y: 3980}
        ];

        const scatterData2 = [
            {x: 2680, y: 8420},
            {x: 2590, y: 8150},
            {x: 2520, y: 7890},
            {x: 2450, y: 7650},
            {x: 2380, y: 7520},
            {x: 2420, y: 7380},
            {x: 2490, y: 7210},
            {x: 2280, y: 7120},
            {x: 2250, y: 6890},
            {x: 2210, y: 6750},
            {x: 2150, y: 6520},
            {x: 2180, y: 6380}
        ];

        const scatterData3 = [
            {x: 0.71, y: 2680},
            {x: 0.68, y: 2590},
            {x: 0.66, y: 2520},
            {x: 0.58, y: 2450},
            {x: 0.62, y: 2380},
            {x: 0.59, y: 2420},
            {x: 0.55, y: 2490},
            {x: 0.60, y: 2280},
            {x: 0.56, y: 2250},
            {x: 0.52, y: 2210},
            {x: 0.49, y: 2150},
            {x: 0.48, y: 2180}
        ];

        const scatterData4 = [
            {x: 645, y: 51.2},
            {x: 635, y: 49.8},
            {x: 628, y: 48.9},
            {x: 624, y: 48.2},
            {x: 618, y: 47.5},
            {x: 614, y: 46.8},
            {x: 608, y: 45.9},
            {x: 603, y: 45.2},
            {x: 598, y: 44.5},
            {x: 593, y: 43.8},
            {x: 587, y: 42.9},
            {x: 582, y: 42.1}
        ];

        // Show scatter plots when button clicked
        document.getElementById('view-scatter-plots').addEventListener('click', function() {
            document.getElementById('scatter-plots-section').classList.remove('hidden');
            this.style.display = 'none';
            
            // Initialize scatter plots
            // Scatter 1
            const scatter1Ctx = document.getElementById('scatter-1').getContext('2d');
            new Chart(scatter1Ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Athletes',
                        data: scatterData1,
                        backgroundColor: 'rgba(96, 165, 250, 0.6)',
                        borderColor: 'rgb(96, 165, 250)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Jump Height (cm)' },
                            min: 40,
                            max: 55
                        },
                        y: {
                            title: { display: true, text: 'Peak Power (W)' },
                            min: 3800,
                            max: 5400
                        }
                    }
                }
            });

            // Scatter 2
            const scatter2Ctx = document.getElementById('scatter-2').getContext('2d');
            new Chart(scatter2Ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Athletes',
                        data: scatterData2,
                        backgroundColor: 'rgba(74, 222, 128, 0.6)',
                        borderColor: 'rgb(74, 222, 128)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Peak Force (N)' },
                            min: 2100,
                            max: 2750
                        },
                        y: {
                            title: { display: true, text: 'RFD (N/s)' },
                            min: 6200,
                            max: 8600
                        }
                    }
                }
            });

            // Scatter 3
            const scatter3Ctx = document.getElementById('scatter-3').getContext('2d');
            new Chart(scatter3Ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Athletes',
                        data: scatterData3,
                        backgroundColor: 'rgba(251, 146, 60, 0.6)',
                        borderColor: 'rgb(251, 146, 60)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'RSI-modified' },
                            min: 0.45,
                            max: 0.75
                        },
                        y: {
                            title: { display: true, text: 'Peak Force (N)' },
                            min: 2100,
                            max: 2750
                        }
                    }
                }
            });

            // Scatter 4
            const scatter4Ctx = document.getElementById('scatter-4').getContext('2d');
            new Chart(scatter4Ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Athletes',
                        data: scatterData4,
                        backgroundColor: 'rgba(168, 85, 247, 0.6)',
                        borderColor: 'rgb(168, 85, 247)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Flight Time (ms)' },
                            min: 575,
                            max: 655
                        },
                        y: {
                            title: { display: true, text: 'Jump Height (cm)' },
                            min: 40,
                            max: 55
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>